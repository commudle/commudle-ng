<div class="chats-list-container">
  <nb-card [ngClass]="{'active': showChat}" class="chats-list">
    <nb-card-header class="d-flex align-items-center justify-content-space-between">
      <div>
        Personal Inbox
      </div>
      <button (click)="showChat = !showChat" ghost nbButton shape="round" size="small">
        <nb-icon icon="close"></nb-icon>
      </button>
    </nb-card-header>
    <nb-card-body>
      <nb-list>
        <nb-list-item (click)="openChat(chatUser)" *ngFor="let chatUser of allPersonalChatUsers" class="clickable">
          <commudle-user-profile-mini [showLiveStatus]="showLiveStatus" [size]="'small'"
                                 [user]="chatUser.user"></commudle-user-profile-mini>
          <commudle-badge *ngIf="currentUser && chatUser.unread_user_ids.includes(currentUser.id)" [color]="'#ff5c1e'"
                     [fontSize]="'small'" [text]="'Unread'"></commudle-badge>
        </nb-list-item>
      </nb-list>
    </nb-card-body>
  </nb-card>
  <button (click)="showChat = !showChat" class="chats-list-toggle" nbButton shape="round">
    <nb-badge *ngIf="unreadCount > 0" status="info" text="{{unreadCount}}"></nb-badge>
    <nb-icon icon="message-square-outline"></nb-icon>
  </button>
</div>
