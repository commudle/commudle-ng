<div class="preferences-container">
  <div class="subscribe-all-btn-container">
    <strong>Emails</strong>
    <nb-toggle
      (click)="toggleAllSubscriptions()"
      [(ngModel)]="subscribeAllStatus"
      labelPosition="left"
      status="success"
    >
      {{ subscribeAllStatus ? 'On' : 'Off' }}
    </nb-toggle>
  </div>
  <ng-container *ngFor="let subscriptionGroup of subscriptionGroups | keyvalue">
    <div *ngIf="subscriptionGroup.value.length !== 0" class="preferences-item">
      <strong class="group-name">{{ subscriptionGroup.key | capitalizeAndRemoveUnderscore }}</strong>
      <nb-list>
        <nb-list-item *ngFor="let entity in subscriptionGroup.value" class="display-flex justify-content-space-between">
          <label>{{ entity.name }}</label>
          <nb-toggle
            (click)="this.subscribeAllStatus && toggleSubscription(entity)"
            [(ngModel)]="entity.subscribed"
            [disabled]="!this.subscribeAllStatus"
            labelPosition="left"
            status="success"
          >
            {{ entity.subscribed ? 'On' : 'Off' }}
          </nb-toggle>
        </nb-list-item>
      </nb-list>
    </div>
  </ng-container>
</div>
