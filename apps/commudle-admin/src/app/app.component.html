<div
  [ngClass]="{ 'com-dark, nb-theme-dark': isDarkMode, 'com-light, nb-theme-default': !isDarkMode }"
  [attr.data-theme]="isDarkMode ? 'dark' : 'light'"
>
  <nb-layout class="home-layout">
    <nb-layout-header fixed>
      <app-navbar></app-navbar>
    </nb-layout-header>

    <nb-sidebar
      (clickOutside)="closeSidebar()"
      [(state)]="sideBarState"
      [fixed]="true"
      appClickOutside
      exclude=".home-sidebar"
      right
      tag="mainMenu"
    >
      <app-sidebar-menu></app-sidebar-menu>
    </nb-sidebar>

    <nb-layout-column>
      <div id="mini-user-profile-container"></div>
      <app-profile-status-bar *ngIf="currentUser && profileBarStatus"></app-profile-status-bar>
      <div class="com-min-h-screen router-outlet">
        <commudle-sidebar [eventName]="'helpSection'" [expandedWidth]="ESidebarWidth.XL" [showExpandedButton]="false"
          ><commudle-help-dictionary-iframe [eventName]="'helpSection'"></commudle-help-dictionary-iframe
        ></commudle-sidebar>
        <router-outlet></router-outlet>
      </div>
      <app-footer></app-footer>
    </nb-layout-column>

    <nb-layout-footer *appBreakpoints="'<=md'" fixed>
      <app-navbar-menu></app-navbar-menu>
    </nb-layout-footer>
  </nb-layout>

  <app-chats-container *ngIf="currentUser && cookieAccepted"></app-chats-container>
  <app-cookie-consent></app-cookie-consent>
  <app-user-visit-tracker></app-user-visit-tracker>
  <app-sw-update></app-sw-update>
  <commudle-whats-new></commudle-whats-new>
  <!-- <app-push-notification></app-push-notification> -->
</div>
