<div *ngIf="currentUser?.id !== user?.id" class="user-follow">
  <button
    (click)="isFollowing ? toggleFollow() : onFollowClick()"
    [appearance]="appearance ?? (isFollowing ? 'outline' : 'filled')"
    [ngClass]="{ 'fixed-width': !showIcon, 'width-full': isMobileWidthFull }"
    [status]="status === 'basic' ? 'basic' : 'info'"
    class="follow-btn"
    nbButton
    shape="semi-round"
    size="small"
    [disabled]="disabled"
  >
    <nb-icon *ngIf="showIcon" [icon]="isFollowing ? 'checkmark' : 'plus'"></nb-icon>
    {{ isFollowing ? 'Following' : 'Follow' }}
  </button>
</div>

<ng-template #userFollowDialog let-ref="dialogRef">
  <nb-card class="user-follow-dialog">
    <nb-card-header class="d-flex align-items-center justify-content-space-between">
      Confirmation
      <button (click)="ref.close()" ghost nbButton size="small">
        <nb-icon icon="close"></nb-icon>
      </button>
    </nb-card-header>
    <nb-card-body>
      <p>
        Thank You for joining the journey of
        <em>{{ user.name }}</em>
        !
      </p>
      <p>
        As a follower you will be able to receive content in the form of emails and notifications about
        <em>{{ user.name }}</em> from Commudle.
      </p>
    </nb-card-body>
    <nb-card-footer class="d-flex justify-content-space-between">
      <button (click)="ref.close()" ghost nbButton status="danger">Cancel</button>
      <button (click)="toggleFollow(); ref.close()" nbButton status="success">Confirm</button>
    </nb-card-footer>
  </nb-card>
</ng-template>
